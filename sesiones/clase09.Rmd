
#Modelamiento y técnicas predictivas

Carguemos la data:

```{r}
folder='data'
fileName='idh_elec.csv'
fileToRead=file.path(folder,fileName)
idh_elec=read.csv(fileToRead,strip.white = T,
                  stringsAsFactors = F)
```

Como antes, revisemos qué TIPO de data tenemos:

```{r}
str(idh_elec)
```

La data tiene los componentes del IDH calculados por distrito el año 2012. Así mismo, tenemos los votos para PPK y KEIKO durante la segunda vuelta del 2016. Veamos qué podemos preguntarnos con técnicas multivariadas.

[Voy a hacer primero una regresión logística binaria]

```{r}
idh_elec$ganappk=as.factor(ifelse(idh_elec$PPK>idh_elec$FP,1,0))
levels(idh_elec$ganappk)=c('Keiko','PPK')
```

##Buscando explicaciones

Si quisieramos saber cómo están relacionados los resultados electorales con el idh, necesitamos hacer una regresión. Primero, creemos un subconjunto:

[Agarro las cuatro variables componentes del idh]:

```{r}
test=idh_elec[,c('ganappk','esperanza','secundaria','tiempoedu','percapitaf')]
aggregate(cbind(esperanza,secundaria,tiempoedu,percapitaf) ~ ganappk, data=test,FUN=mean)
```

Exploremos los grupos con más detalle:

```{r}
par(mfrow=c(2,2))
boxplot(esperanza ~ ganappk, data=test,main='esperanza de vida')
boxplot(secundaria ~ ganappk, data=test,main='secundaria')
boxplot(tiempoedu ~ ganappk, data=test,main='años de educación')
boxplot(percapitaf ~ ganappk, data=test,main='percapita familiar')
```

[Prosor, en esa situación, ¿qué se hace?]

Diferencia entre modelo matemático y modelo estadístico: este último tiene error.

**Cuando uno analiza dos variables, uno quiere decir que estas son suficientes**. Pero... ***todo entra en juego***.

[Cada uno de los cuatro boxplots, **omite el efecto de lo restante**.]

**Esa es la regresión**.

Aquí proponemos un modelo:

[Regresión logística binaria con comando **glm**]

```{r}
modeloDico <- glm(ganappk ~ ., 
                 data = test, 
                 family = "binomial")

summary(modeloDico)
```

El . es "todo lo demás" [en este caso, en mi subconjunto]


Ayudan a que salga el cero: tienen valor negativo.

Ayudan a que salga el uno: tienen valor positivo.

[Las regresiones no son difíciles; lo difícil es tener la data].

